{% extends "index.html" %}

{% block content %}
  <h1>{{ section.title }}</h1>

  {% if section.content %}
    <div class="section-content">
      {{ section.content | safe }}
    </div>
  {% endif %}

  {% if section.subsections %}
    <ul class="subsection-list">
      {% for s in section.subsections %}
        {% set subsection = get_section(path=s) %}
        <li>
          <a href="{{ subsection.permalink | safe }}">
            {{ subsection.title }}
          </a>
        </li>
      {% endfor %}
    </ul>
  {% endif %}

  {% if section.pages %}
    <ul class="page-list">
      {% for page in section.pages %}
        <li>
          <a href="{{ page.permalink | safe }}">
            {{ page.title }}
          </a>
        </li>
      {% endfor %}
    </ul>
  {% endif %}
{% endblock content %}

{% block prev_link %}
  {% set index = get_section(path="_index.md") %}
  {% set found_current = false %}
  {% for s in index.subsections %}
    {% set subsection = get_section(path=s) %}
    {% if found_current %}
      <a class="previous" href="{{ subsection.permalink | safe }}"><</a>
      {% set_global found_current = false %}
    {% endif %}
    {% if subsection.permalink == section.permalink %}
      {% set_global found_current = true %}
    {% endif %}
  {% endfor %}
{% endblock prev_link %}

{% block next_link %}
  {% set index = get_section(path="_index.md") %}
  {% set found_current = false %}
  {% for s in index.subsections %}
    {% set subsection = get_section(path=s) %}
    {% if found_current %}
      <a class="next" href="{{ subsection.permalink | safe }}">></a>
      {% set_global found_current = false %}
    {% endif %}
    {% if subsection.permalink == section.permalink %}
      {% set_global found_current = true %}
    {% endif %}
  {% endfor %}
{% endblock next_link %}
